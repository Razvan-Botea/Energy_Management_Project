{"ast":null,"code":"var _jsxFileName = \"/home/razvan/LabSD/frontend/src/pages/UserDashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport * as api from '../services/api';\n// --- FIX: Remove unused SockJS/Stomp imports since we use @stomp/stompjs now ---\nimport { Client } from '@stomp/stompjs';\nimport ChatComponent from '../components/ChatComponent';\n\n// Import Recharts components\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction UserDashboard() {\n  _s();\n  const auth = useAuth();\n\n  // Data State\n  const [devices, setDevices] = useState([]);\n  const [chartData, setChartData] = useState([]);\n\n  // Selection State\n  const [selectedDeviceId, setSelectedDeviceId] = useState('');\n  const [selectedDate, setSelectedDate] = useState('');\n\n  // UI State\n  const [loadingDevices, setLoadingDevices] = useState(true);\n  const [loadingChart, setLoadingChart] = useState(false);\n  const [error, setError] = useState('');\n\n  // Notification State\n  const [notifications, setNotifications] = useState([]);\n\n  // --- 1. WebSocket for ALERTS ---\n  useEffect(() => {\n    if (!auth.userId) return;\n\n    // Connect using pure @stomp/stompjs (No SockJS needed for modern browsers usually, \n    // but if you used SockJS in backend, check the URL protocol ws vs http)\n    // Assuming standard WS connection here:\n    const client = new Client({\n      brokerURL: 'ws://localhost:8000/ws',\n      // Use ws:// for WebSocket\n      reconnectDelay: 5000,\n      onConnect: () => {\n        console.log(\"MY USER ID IS: \" + auth.userId); // <--- Verifică asta!\n        console.log(\"Subscribing to: /topic/alerts/\" + auth.userId);\n        client.subscribe(`/topic/alerts/${auth.userId}`, message => {\n          const alert = JSON.parse(message.body);\n          setNotifications(prev => [alert, ...prev]);\n\n          // Auto-dismiss after 10s\n          setTimeout(() => {\n            setNotifications(prev => prev.filter(n => n !== alert));\n          }, 5000);\n        });\n      },\n      onStompError: frame => {\n        console.error('Broker reported error: ' + frame.headers['message']);\n        console.error('Additional details: ' + frame.body);\n      }\n    });\n    client.activate();\n    return () => {\n      client.deactivate();\n    };\n  }, [auth.userId]); // <--- AICI LIPSEA ÎNCHIDEREA BLOCULUI ÎN CODUL TĂU\n\n  // --- 2. Fetch Users Devices on Load ---\n  useEffect(() => {\n    const fetchDevices = async () => {\n      try {\n        setLoadingDevices(true);\n        const userDevices = await api.getDevicesForUser(auth.token, auth.userId);\n        setDevices(userDevices);\n        if (userDevices.length > 0) setSelectedDeviceId(userDevices[0].id);\n      } catch (err) {\n        console.error('Failed to fetch devices', err);\n        setError('Could not load devices.');\n      }\n      setLoadingDevices(false);\n    };\n    if (auth.token && auth.userId) fetchDevices();\n  }, [auth.token, auth.userId]);\n\n  // --- 3. Fetch Chart Data ---\n  useEffect(() => {\n    const fetchMonitoringData = async () => {\n      if (!selectedDeviceId || !selectedDate) return;\n      try {\n        setLoadingChart(true);\n        setError('');\n        const dateObj = new Date(selectedDate);\n        const offset = dateObj.getTimezoneOffset() * 60000;\n        const timestamp = dateObj.getTime() + offset;\n        const data = await api.getEnergyConsumption(auth.token, selectedDeviceId, timestamp);\n        const formattedData = data.map(item => {\n          const date = new Date(item.timestamp);\n          const hourLabel = date.getHours().toString().padStart(2, '0') + \":00\";\n          return {\n            time: hourLabel,\n            energy: item.hourlyConsumption\n          };\n        });\n        formattedData.sort((a, b) => a.time.localeCompare(b.time));\n        setChartData(formattedData);\n      } catch (err) {\n        console.error('Error fetching chart data', err);\n        setChartData([]);\n      }\n      setLoadingChart(false);\n    };\n    fetchMonitoringData();\n  }, [selectedDeviceId, selectedDate, auth.token]);\n  const handleDeviceChange = e => setSelectedDeviceId(e.target.value);\n  const handleDateChange = e => setSelectedDate(e.target.value);\n  if (loadingDevices) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Loading dashboard...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 119,\n    columnNumber: 30\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"page-container\",\n    style: {\n      padding: '20px',\n      position: 'relative'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"notification-container\",\n      style: {\n        position: 'fixed',\n        top: '80px',\n        right: '20px',\n        zIndex: 999,\n        width: '300px'\n      },\n      children: notifications.map((notif, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          backgroundColor: '#dc3545',\n          color: 'white',\n          padding: '15px',\n          marginBottom: '10px',\n          borderRadius: '5px',\n          boxShadow: '0 4px 6px rgba(0,0,0,0.1)',\n          animation: 'fadeIn 0.5s'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"\\u26A0\\uFE0F Overconsumption Alert:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 59\n        }, this), notif.message]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Energy Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"error-text\",\n      style: {\n        color: 'red'\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"controls\",\n      style: {\n        display: 'flex',\n        gap: '20px',\n        marginBottom: '30px',\n        padding: '20px',\n        backgroundColor: '#f5f5f5',\n        borderRadius: '8px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          flexDirection: 'column'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          style: {\n            marginBottom: '5px',\n            fontWeight: 'bold'\n          },\n          children: \"Select Device:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: selectedDeviceId,\n          onChange: handleDeviceChange,\n          style: {\n            padding: '8px',\n            minWidth: '200px'\n          },\n          children: devices.map(device => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: device.id,\n            children: device.name\n          }, device.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          flexDirection: 'column'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          style: {\n            marginBottom: '5px',\n            fontWeight: 'bold'\n          },\n          children: \"Select Date:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"date\",\n          value: selectedDate,\n          onChange: handleDateChange,\n          style: {\n            padding: '8px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chart-container\",\n      style: {\n        height: '400px',\n        width: '100%'\n      },\n      children: !selectedDate ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Please select a date to view consumption.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 11\n      }, this) : loadingChart ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading chart data...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 11\n      }, this) : chartData.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No energy data found for this device on this date.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(ResponsiveContainer, {\n        width: \"100%\",\n        height: \"100%\",\n        children: /*#__PURE__*/_jsxDEV(BarChart, {\n          data: chartData,\n          margin: {\n            top: 5,\n            right: 30,\n            left: 20,\n            bottom: 5\n          },\n          children: [/*#__PURE__*/_jsxDEV(CartesianGrid, {\n            strokeDasharray: \"3 3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(XAxis, {\n            dataKey: \"time\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(YAxis, {\n            label: {\n              value: 'Energy (kWh)',\n              angle: -90,\n              position: 'insideLeft'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Tooltip, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Legend, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Bar, {\n            dataKey: \"energy\",\n            fill: \"#8884d8\",\n            name: \"Hourly Consumption\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ChatComponent, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 122,\n    columnNumber: 5\n  }, this);\n}\n_s(UserDashboard, \"nWUeb8KkSDBg6nJwmipDQKpJoTQ=\", false, function () {\n  return [useAuth];\n});\n_c = UserDashboard;\nexport default UserDashboard;\nvar _c;\n$RefreshReg$(_c, \"UserDashboard\");","map":{"version":3,"names":["React","useState","useEffect","useAuth","api","Client","ChatComponent","BarChart","Bar","XAxis","YAxis","CartesianGrid","Tooltip","Legend","ResponsiveContainer","jsxDEV","_jsxDEV","UserDashboard","_s","auth","devices","setDevices","chartData","setChartData","selectedDeviceId","setSelectedDeviceId","selectedDate","setSelectedDate","loadingDevices","setLoadingDevices","loadingChart","setLoadingChart","error","setError","notifications","setNotifications","userId","client","brokerURL","reconnectDelay","onConnect","console","log","subscribe","message","alert","JSON","parse","body","prev","setTimeout","filter","n","onStompError","frame","headers","activate","deactivate","fetchDevices","userDevices","getDevicesForUser","token","length","id","err","fetchMonitoringData","dateObj","Date","offset","getTimezoneOffset","timestamp","getTime","data","getEnergyConsumption","formattedData","map","item","date","hourLabel","getHours","toString","padStart","time","energy","hourlyConsumption","sort","a","b","localeCompare","handleDeviceChange","e","target","value","handleDateChange","children","fileName","_jsxFileName","lineNumber","columnNumber","className","style","padding","position","top","right","zIndex","width","notif","index","backgroundColor","color","marginBottom","borderRadius","boxShadow","animation","display","gap","flexDirection","fontWeight","onChange","minWidth","device","name","type","height","margin","left","bottom","strokeDasharray","dataKey","label","angle","fill","_c","$RefreshReg$"],"sources":["/home/razvan/LabSD/frontend/src/pages/UserDashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport * as api from '../services/api';\n// --- FIX: Remove unused SockJS/Stomp imports since we use @stomp/stompjs now ---\nimport { Client } from '@stomp/stompjs';\nimport ChatComponent from '../components/ChatComponent';\n\n// Import Recharts components\nimport {\n  BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer\n} from 'recharts';\n\nfunction UserDashboard() {\n  const auth = useAuth();\n  \n  // Data State\n  const [devices, setDevices] = useState([]);\n  const [chartData, setChartData] = useState([]);\n  \n  // Selection State\n  const [selectedDeviceId, setSelectedDeviceId] = useState('');\n  const [selectedDate, setSelectedDate] = useState('');\n  \n  // UI State\n  const [loadingDevices, setLoadingDevices] = useState(true);\n  const [loadingChart, setLoadingChart] = useState(false);\n  const [error, setError] = useState('');\n  \n  // Notification State\n  const [notifications, setNotifications] = useState([]);\n\n  // --- 1. WebSocket for ALERTS ---\n  useEffect(() => {\n    if (!auth.userId) return;\n\n    // Connect using pure @stomp/stompjs (No SockJS needed for modern browsers usually, \n    // but if you used SockJS in backend, check the URL protocol ws vs http)\n    // Assuming standard WS connection here:\n    const client = new Client({\n        brokerURL: 'ws://localhost:8000/ws', // Use ws:// for WebSocket\n        reconnectDelay: 5000,\n        onConnect: () => {\n            console.log(\"MY USER ID IS: \" + auth.userId); // <--- Verifică asta!\n            console.log(\"Subscribing to: /topic/alerts/\" + auth.userId);\n            client.subscribe(`/topic/alerts/${auth.userId}`, (message) => {\n                const alert = JSON.parse(message.body);\n                setNotifications(prev => [alert, ...prev]);\n                \n                // Auto-dismiss after 10s\n                setTimeout(() => {\n                    setNotifications(prev => prev.filter(n => n !== alert));\n                }, 5000);\n            });\n        },\n        onStompError: (frame) => {\n            console.error('Broker reported error: ' + frame.headers['message']);\n            console.error('Additional details: ' + frame.body);\n        }\n    });\n\n    client.activate();\n\n    return () => {\n        client.deactivate();\n    };\n  }, [auth.userId]); // <--- AICI LIPSEA ÎNCHIDEREA BLOCULUI ÎN CODUL TĂU\n\n  // --- 2. Fetch Users Devices on Load ---\n  useEffect(() => {\n    const fetchDevices = async () => {\n      try {\n        setLoadingDevices(true);\n        const userDevices = await api.getDevicesForUser(auth.token, auth.userId);\n        setDevices(userDevices);\n        if (userDevices.length > 0) setSelectedDeviceId(userDevices[0].id);\n      } catch (err) {\n        console.error('Failed to fetch devices', err);\n        setError('Could not load devices.');\n      }\n      setLoadingDevices(false);\n    };\n    if (auth.token && auth.userId) fetchDevices();\n  }, [auth.token, auth.userId]);\n\n  // --- 3. Fetch Chart Data ---\n  useEffect(() => {\n    const fetchMonitoringData = async () => {\n      if (!selectedDeviceId || !selectedDate) return;\n\n      try {\n        setLoadingChart(true);\n        setError('');\n        \n        const dateObj = new Date(selectedDate);\n        const offset = dateObj.getTimezoneOffset() * 60000;\n        const timestamp = dateObj.getTime() + offset;\n\n        const data = await api.getEnergyConsumption(auth.token, selectedDeviceId, timestamp);\n        \n        const formattedData = data.map(item => {\n          const date = new Date(item.timestamp);\n          const hourLabel = date.getHours().toString().padStart(2, '0') + \":00\";\n          return { time: hourLabel, energy: item.hourlyConsumption };\n        });\n        formattedData.sort((a, b) => a.time.localeCompare(b.time));\n        setChartData(formattedData);\n      } catch (err) {\n        console.error('Error fetching chart data', err);\n        setChartData([]);\n      }\n      setLoadingChart(false);\n    };\n    fetchMonitoringData();\n  }, [selectedDeviceId, selectedDate, auth.token]);\n\n  const handleDeviceChange = (e) => setSelectedDeviceId(e.target.value);\n  const handleDateChange = (e) => setSelectedDate(e.target.value);\n\n  if (loadingDevices) return <p>Loading dashboard...</p>;\n\n  return (\n    <div className=\"page-container\" style={{ padding: '20px', position: 'relative' }}>\n      \n      {/* --- NOTIFICATION AREA --- */}\n      <div className=\"notification-container\" style={{ \n          position: 'fixed', top: '80px', right: '20px', zIndex: 999, width: '300px' \n      }}>\n        {notifications.map((notif, index) => (\n            <div key={index} style={{ \n                backgroundColor: '#dc3545', color: 'white', padding: '15px', \n                marginBottom: '10px', borderRadius: '5px', boxShadow: '0 4px 6px rgba(0,0,0,0.1)',\n                animation: 'fadeIn 0.5s'\n            }}>\n                <strong>⚠️ Overconsumption Alert:</strong><br/>\n                {notif.message}\n            </div>\n        ))}\n      </div>\n\n      <h2>Energy Dashboard</h2>\n      {error && <p className=\"error-text\" style={{color: 'red'}}>{error}</p>}\n\n      {/* --- Controls Section --- */}\n      <div className=\"controls\" style={{ \n        display: 'flex', gap: '20px', marginBottom: '30px', padding: '20px',\n        backgroundColor: '#f5f5f5', borderRadius: '8px'\n      }}>\n        <div style={{ display: 'flex', flexDirection: 'column' }}>\n          <label style={{ marginBottom: '5px', fontWeight: 'bold' }}>Select Device:</label>\n          <select value={selectedDeviceId} onChange={handleDeviceChange} style={{ padding: '8px', minWidth: '200px' }}>\n            {devices.map(device => (\n              <option key={device.id} value={device.id}>{device.name}</option>\n            ))}\n          </select>\n        </div>\n        <div style={{ display: 'flex', flexDirection: 'column' }}>\n          <label style={{ marginBottom: '5px', fontWeight: 'bold' }}>Select Date:</label>\n          <input type=\"date\" value={selectedDate} onChange={handleDateChange} style={{ padding: '8px' }}/>\n        </div>\n      </div>\n\n      {/* --- Chart Section --- */}\n      <div className=\"chart-container\" style={{ height: '400px', width: '100%' }}>\n        {!selectedDate ? (\n          <p>Please select a date to view consumption.</p>\n        ) : loadingChart ? (\n          <p>Loading chart data...</p>\n        ) : chartData.length === 0 ? (\n          <p>No energy data found for this device on this date.</p>\n        ) : (\n          <ResponsiveContainer width=\"100%\" height=\"100%\">\n            <BarChart data={chartData} margin={{ top: 5, right: 30, left: 20, bottom: 5 }}>\n              <CartesianGrid strokeDasharray=\"3 3\" />\n              <XAxis dataKey=\"time\" />\n              <YAxis label={{ value: 'Energy (kWh)', angle: -90, position: 'insideLeft' }} />\n              <Tooltip />\n              <Legend />\n              <Bar dataKey=\"energy\" fill=\"#8884d8\" name=\"Hourly Consumption\" />\n            </BarChart>\n          </ResponsiveContainer>\n        )}\n      </div>\n\n      {/* --- CHAT COMPONENT --- */}\n      <ChatComponent />\n    </div>\n  );\n}\n\nexport default UserDashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}